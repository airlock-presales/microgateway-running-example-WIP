architecture: standalone

image:
  registry: docker.io
  repository: bitnamisecure/redis
  tag: latest
  digest: ""

global:
  security:
    allowInsecureImages: true

networkPolicy:
  enabled: false

auth:
  enabled: true
  password: runningexample

tls:
  enabled: true
  existingSecret: redis-certificate
  certFilename: tls.crt
  certKeyFilename: tls.key
  certCAFilename: ca.crt

master:
  kind: Deployment

  # Let OpenShift inject allowed IDs via SCC; do not set SELinux options
  podSecurityContext:
    enabled: true
    fsGroup: null
    seLinuxOptions: null
    seccompProfile:
      type: RuntimeDefault

  containerSecurityContext:
    enabled: true
    runAsUser: null
    runAsNonRoot: true
    allowPrivilegeEscalation: false
    readOnlyRootFilesystem: false # Redis needs write access
    capabilities:
      drop:
      - ALL
    # Ensure the chart does not render an empty seLinux block
    seLinuxOptions: null

  persistence:
    enabled: false

  startupProbe:
    enabled: true
    initialDelaySeconds: 1
    periodSeconds: 1

  readinessProbe:
    initialDelaySeconds: 0

  livenessProbe:
    initialDelaySeconds: 0

# Disable init helper that typically needs root
volumePermissions:
  enabled: false
